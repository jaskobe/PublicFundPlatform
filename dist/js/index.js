function dateParse(t){var e,a=dataJson.mks.datetime,i=a.length;if(t<=12){var n=a[i-1],o=a[i-1];n=new Date(n),n=n.setMonth(n.getMonth()-t),n=format(new Date(n),"line")}else var n=a[0],o=a[i-1];return e={minDate:n,maxDate:o}}function format(t,e){var a=t.getFullYear(),i=1==(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):t.getMonth()+1,n=1==t.getDate().toString().length?"0"+t.getDate():t.getDate();return"line"==e?a+"-"+i+"-"+n:"dot"==e?a+","+i+","+n:void 0}function init(t,e){var t=t||"2004-01-30",e=e||"2026-10-25";$.post("./api/api.php?c=webHistory",{start:t,end:e},function(t){var e=JSON.parse(t);if("1"==e.code){var a=$(".index-num"),i=[];i[0]=e.data.xiapu,i[1]=e.data.max_back+"%",i[2]=e.data.year_wave_rate+"%",i[3]=e.data.year_rate+"%",i[4]=e.data.total_revenue+"%";for(var n=0;n<a.length;n++)a[n].innerHTML=i[n];var o=e.data,r=[],s=[],d=[];r=o.date,s=o.moqiu,d=o.hushen,1==dataPush&&(dataJson.mks={datetime:r,moqiu:s,hushen:d},dataPush=2),historyChart.setOption({xAxis:[{data:r}],series:[{data:s},{data:d}]})}else alert(e.msg)})}var dataJson={mks:{}},dataPush=1,itemTab=$(".row .item-tab");itemTab.on("click",function(){$(this).addClass("active"),$(this).siblings().removeClass("active");var t=$(this).find(".item-tab-sub").attr("num");if(t){var e=dateParse(t);init(e.minDate,e.maxDate)}});var historyChart=echarts.init(document.getElementById("history")),option={legend:{data:[{name:"魔球"},{name:"沪深300"}],top:15,icon:"bar",itemGap:20,itemWidth:20,itemHeight:3,textStyle:{fontSize:14,color:"#000"},selectedMode:"multiple"},grid:{x:35,y:45,x2:10,y2:30},color:["#00a3f1","#cc0004"],tooltip:{trigger:"axis",axisPointer:{type:"line"}},xAxis:[{type:"category",data:[],splitLine:{show:!1}}],yAxis:[{type:"value",boundaryGap:[.1,.1]}],series:[{name:"魔球",symbol:"none",itemStyle:{normal:{lineStyle:{width:2}}},type:"line"},{name:"沪深300",symbol:"none",itemStyle:{normal:{lineStyle:{width:2}}},type:"line"}]};historyChart.setOption(option),init();